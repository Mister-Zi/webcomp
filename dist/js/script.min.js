let c=document.getElementById("canvas"),ctx=c.getContext("2d");function resize(){let t=c.getBoundingClientRect();c.width=t.width,c.height=t.height}let light={x:160,y:200},colors=["#ffffff","#ffffff","#ffffff"];function drawLight(){ctx.beginPath(),ctx.arc(light.x,light.y,1e3,0,2*Math.PI);let t=ctx.createRadialGradient(light.x,light.y,0,light.x,light.y,1e3);t.addColorStop(0,"#222222"),t.addColorStop(1,"#000000"),ctx.fillStyle=t,ctx.fill(),ctx.beginPath(),ctx.arc(light.x,light.y,20,0,2*Math.PI),t=ctx.createRadialGradient(light.x,light.y,0,light.x,light.y,5),t.addColorStop(0,"#fff"),t.addColorStop(0,"#222222"),ctx.fillStyle=t,ctx.fill()}function Box(){this.half_size=Math.floor(50*Math.random()+1),this.x=Math.floor(Math.random()*c.width+1),this.y=Math.floor(Math.random()*c.height+1),this.r=Math.random()*Math.PI,this.shadow_length=2e3,this.color=colors[Math.floor(Math.random()*colors.length)],this.getDots=function(){let t=2*Math.PI/4;return{p1:{x:this.x+this.half_size*Math.sin(this.r),y:this.y+this.half_size*Math.cos(this.r)},p2:{x:this.x+this.half_size*Math.sin(this.r+t),y:this.y+this.half_size*Math.cos(this.r+t)},p3:{x:this.x+this.half_size*Math.sin(this.r+2*t),y:this.y+this.half_size*Math.cos(this.r+2*t)},p4:{x:this.x+this.half_size*Math.sin(this.r+3*t),y:this.y+this.half_size*Math.cos(this.r+3*t)}}},this.rotate=function(){let t=(60-this.half_size)/20;this.r+=.002*t,this.x+=t,this.y+=t},this.draw=function(){let t=this.getDots();ctx.beginPath(),ctx.moveTo(t.p1.x,t.p1.y),ctx.lineTo(t.p2.x,t.p2.y),ctx.lineTo(t.p3.x,t.p3.y),ctx.lineTo(t.p4.x,t.p4.y),ctx.fillStyle=this.color,ctx.fill(),this.y-this.half_size>c.height&&(this.y-=c.height+100),this.x-this.half_size>c.width&&(this.x-=c.width+100)},this.drawShadow=function(){let t=this.getDots(),e=[],s=[];for(let o in t){let i=Math.atan2(light.y-t[o].y,light.x-t[o].x),l=t[o].x+this.shadow_length*Math.sin(-i-Math.PI/2),h=t[o].y+this.shadow_length*Math.cos(-i-Math.PI/2);e.push(i),s.push({endX:l,endY:h,startX:t[o].x,startY:t[o].y})}for(let t=s.length-1;t>=0;t--){let e=3===t?0:t+1;ctx.beginPath(),ctx.moveTo(s[t].startX,s[t].startY),ctx.lineTo(s[e].startX,s[e].startY),ctx.lineTo(s[e].endX,s[e].endY),ctx.lineTo(s[t].endX,s[t].endY),ctx.fillStyle="#222222",ctx.fill()}}}let boxes=[];function draw(){ctx.clearRect(0,0,c.width,c.height),drawLight();for(let t=0;t<boxes.length;t++)boxes[t].rotate(),boxes[t].drawShadow();for(let t=0;t<boxes.length;t++)collisionDetection(t),boxes[t].draw();requestAnimationFrame(draw)}for(resize(),draw();boxes.length<14;)boxes.push(new Box);function collisionDetection(t){for(let e=boxes.length-1;e>=0;e--)if(e!==t){let s=boxes[t].x+boxes[t].half_size-(boxes[e].x+boxes[e].half_size),o=boxes[t].y+boxes[t].half_size-(boxes[e].y+boxes[e].half_size);Math.sqrt(s*s+o*o)<boxes[t].half_size+boxes[e].half_size&&(boxes[t].half_size=boxes[t].half_size>1?boxes[t].half_size-=1:1,boxes[e].half_size=boxes[e].half_size>1?boxes[e].half_size-=1:1)}}window.onresize=resize,c.onmousemove=function(t){light.x=void 0===t.offsetX?t.layerX:t.offsetX,light.y=void 0===t.offsetY?t.layerY:t.offsetY};let block1=document.querySelector(".block1"),block2=document.querySelector(".block2"),block3=document.querySelector(".block3"),block4=document.querySelector(".block4"),blocks=[block1,block2,block3,block4],dots=document.getElementsByClassName("dot");for(let t=0;t<dots.length;t++)dots[t].addEventListener("mouseover",()=>{dots[t].classList.add("active")}),dots[t].addEventListener("mouseout",()=>{dots[t].classList.remove("active")}),dots[t].addEventListener("click",()=>{if(dots[t].classList.contains("active_click")&&blocks[t].classList.contains("main_slider_block"));else for(let e=0;e<dots.length;e++)e!==t&&(dots[e].classList.remove("active_click"),dots[t].classList.add("active_click"),blocks[e].classList.remove("active"),blocks[t].classList.add("active"))});let cont_wrapper=document.querySelector(".contacts__wrapper"),hamburger=document.querySelector(".burger"),hamburger_elems=document.querySelectorAll(".burger__line"),header_container=document.querySelector(".header__container"),header_inner=document.querySelector(".header__inner.burger__inner"),header_logo=document.querySelector(".header__logo"),body=document.body,popUp=document.querySelector(".popUpNav");hamburger.addEventListener("click",(function(){for(let t=0;t<hamburger_elems.length;t++)hamburger_elems[t].classList.contains("active")?(hamburger_elems[t].classList.remove("active"),cont_wrapper.classList.remove("active")):(hamburger_elems[t].classList.add("active"),cont_wrapper.classList.add("active"),body.style.overflow="hidden")}));